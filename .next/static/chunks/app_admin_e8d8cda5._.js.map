{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/supri/Desktop/amazon_replicate/app/admin/action.js"],"sourcesContent":["// app/(whatever‑folder)/action.js\r\n\"use server\";\r\n\r\nimport { prisma } from \"@/lib/prisma\";\r\n\r\n/** CREATE (already present) */\r\nexport async function createProduct(formData) {\r\n  const name        = formData.get(\"name\");\r\n  const img         = formData.get(\"img\");\r\n  const description = formData.get(\"description\");\r\n  const price       = Number(formData.get(\"price\"));\r\n\r\n  if (!name || !img || !description || !price) return;\r\n\r\n  await prisma.product.create({\r\n    data: { name, img, description, price },\r\n  });\r\n}\r\n\r\n/** 🔄 UPDATE by id */\r\nexport async function updateProduct(id, formData) {\r\n  const name        = formData.get(\"name\");\r\n  const img         = formData.get(\"img\");\r\n  const description = formData.get(\"description\");\r\n  const price       = Number(formData.get(\"price\"));\r\n\r\n  if (!name || !img || !description || !price) return;\r\n\r\n  await prisma.product.update({\r\n    where: { id },\r\n    data: { name, img, description, price },\r\n  });\r\n}\r\n\r\n/** ❌ Optional: DELETE by id */\r\nexport async function deleteProduct(id) {\r\n  await prisma.product.delete({ where: { id } });\r\n}\r\n"],"names":[],"mappings":";;;;;;IAoBsB,gBAAA,WAAA,GAAA,CAAA,GAAA,yNAAA,CAAA,wBAAA,EAAA,8CAAA,yNAAA,CAAA,aAAA,EAAA,KAAA,GAAA,yNAAA,CAAA,mBAAA,EAAA","debugId":null}},
    {"offset": {"line": 23, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/supri/Desktop/amazon_replicate/app/admin/%5Bid%5D/edit/EditProductForm.jsx"],"sourcesContent":["// app/admin/[id]/edit/EditProductForm.jsx\r\n\"use client\";\r\n\r\nimport { useForm } from \"react-hook-form\";\r\nimport { useTransition } from \"react\";\r\nimport { updateProduct } from \"../../action\"; // adjust relative path\r\nimport { useRouter } from \"next/navigation\";\r\nimport React, { useState } from 'react'\r\nimport \"../../../page.css\"\r\n\r\nexport default function EditProductForm({ product }) {\r\n  const { register, handleSubmit,watch,setValue, formState: { errors } } = useForm({\r\n    defaultValues: {\r\n      name:        product.name,\r\n      description: product.description,\r\n      img:         product.img,\r\n      price:       product.price,\r\n    },\r\n  });\r\n\r\n  const router = useRouter();\r\n  const [isPending, startTransition] = useTransition();\r\n  const [loadingDesc, setLoadingDesc] = useState(false);\r\n\r\n const generateDescription = async () => {\r\n    const name = watch(\"name\");\r\n    if (!name) {\r\n      alert(\"Please enter a product name\");\r\n      return;\r\n    }\r\n\r\n    setLoadingDesc(true);\r\n\r\n    try {\r\n      const res = await fetch(\"/api/generateDescription\", {\r\n        method: \"POST\",\r\n        body: JSON.stringify({ name }),\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n      });\r\n\r\n      const data = await res.json();\r\n      if (data.description) {\r\n        setValue(\"description\", data.description);\r\n      } else {\r\n        alert(\"Failed to generate description\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error generating description:\", err);\r\n      alert(\"Something went wrong during description generation.\");\r\n    }\r\n\r\n    setLoadingDesc(false);\r\n  };\r\n\r\n  const onSubmit = (data) => {\r\n    const formData = new FormData();\r\n    Object.entries(data).forEach(([k, v]) => formData.append(k, v));\r\n\r\n    startTransition(async () => {\r\n      await updateProduct(product.id, formData);\r\n      router.push(\"/admin\");           // back to list\r\n    });\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-3\">\r\n      <input\r\n        {...register(\"name\", { required: true })}\r\n        className=\"input input-bordered w-full\"\r\n        placeholder=\"Name\"\r\n      />\r\n      {errors.name && <span className=\"error\">Name required</span>}\r\n\r\n      <textarea style={{backgroundColor: \"white\",borderRadius: \"12px\"}}\r\n        {...register(\"description\", { required: true })}\r\n        rows={3}\r\n        className=\"textarea textarea-bordered w-full\"\r\n      />\r\n      {errors.description && <span className=\"error\">Description required</span>}\r\n\r\n      <input\r\n        {...register(\"img\", { required: true })}\r\n        className=\"input input-bordered w-full\"\r\n        placeholder=\"Image URL\"\r\n      />\r\n      {errors.img && <span className=\"error\">Image URL required</span>}\r\n\r\n      <input\r\n        type=\"number\"\r\n        step=\"0.01\"\r\n        {...register(\"price\", { required: true, valueAsNumber: true })}\r\n        className=\"input input-bordered w-full\"\r\n        placeholder=\"Price\"\r\n      />\r\n      {errors.price && <span className=\"error\">Price required</span>}\r\n\r\n       <button \r\n              type=\"button\"\r\n              onClick={generateDescription}\r\n              disabled={loadingDesc}\r\n              className=\"mt-2 bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded\"\r\n            >\r\n              {loadingDesc ? \"Generating...\" : \"Auto Generate Description ✨\"}\r\n            </button>\r\n\r\n      <button className=\"savechanges\" disabled={isPending}>\r\n        {isPending ? \"Saving…\" : \"Save changes\"}\r\n      </button>\r\n    </form>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}